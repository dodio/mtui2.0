{"version":3,"sources":["../../dev/mtui/popover/PopoverBox.jsx"],"names":["PopoverBox","props","state","show","style","showOrHide","obj","btn","getPlace","popover","refs","wid","place","left","width","top","height","setState","mark","setStyle","nextProps","nextState","display","cName","push","className","mid","join","content"],"mappings":"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","file":"PopoverBox.js","sourcesContent":["'use strict';\r\n\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport assign from '../utils/assign';\r\nimport {position} from '../utils/offset';\r\n\r\nclass PopoverBox extends Component {\r\n\r\n    // 构造函数\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false,\r\n            style: {}\r\n        };\r\n    }\r\n\r\n    closeModal(){\r\n        this.props.showOrHide(true);\r\n    }\r\n\r\n    // 设置place\r\n    setStyle(){\r\n        let obj = {};\r\n        let btn = this.props.getPlace();\r\n        let popover = position(this.refs.popover);\r\n        let wid = 8; // 箭头的尺寸\r\n        // console.log('popover',popover)\r\n        if(this.props.place === 'top'){\r\n            obj.left = btn.left + (btn.width - popover.width) / 2;\r\n            obj.top = btn.top - popover.height - wid;\r\n        }else if(this.props.place === 'left'){\r\n            obj.left = btn.left - popover.width - wid;\r\n            obj.top = btn.top + (btn.height - popover.height) / 2;\r\n        }else if(this.props.place === 'right'){\r\n            obj.left = btn.left + btn.width + wid;\r\n            obj.top = btn.top + (btn.height - popover.height) / 2;\r\n        }else if(this.props.place === 'bottom'){\r\n            obj.left = btn.left + (btn.width - popover.width) / 2;\r\n            obj.top = btn.top + btn.height + wid;\r\n        }\r\n        this.setState({\r\n            style: obj,\r\n            show: this.props.show\r\n        });\r\n    }\r\n\r\n    showOrHide(mark){\r\n        this.setState({\r\n            show: mark\r\n        }, function(){\r\n            this.setStyle();\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.showOrHide(this.props.show);\r\n    }\r\n\r\n    componentWillUpdate(nextProps, nextState) {\r\n        if(nextProps.show !== this.props.show){\r\n            this.showOrHide(nextProps.show);\r\n        }     \r\n    }\r\n\r\n    render(){\r\n        var style = assign([\r\n            this.state.style, \r\n            {display: this.state.show ? 'block' : 'none'}, \r\n            this.props.style]);\r\n\r\n        var cName = ['mt-popover', 'animated bounceIn'];\r\n        if(this.props.place){\r\n            cName.push('mt-popover-' + this.props.place);\r\n        }\r\n        if(this.props.className){\r\n            cName.push(this.props.className);\r\n        }\r\n\r\n        return <div id={this.props.mid} ref=\"popover\" className={cName.join(' ')} style={style}>\r\n                    {this.props.content}\r\n                    <div className=\"mt-popover-arrow\"></div>\r\n               </div>;\r\n    }\r\n}\r\n\r\n// 主页\r\nexport default PopoverBox;"]}