{"version":3,"sources":["../../dev/mtui/dateCore/dateCore.jsx"],"names":["getMDay","y","m","mday","Array","weekNumber","d","wk","i","Math","round","addAndDelOneMonth","mark","parseInt","year","month","addOrDelMonthDay","date","obj","maxday","day","setHHMMSS","hours","minutes","seconds","setArr","arr","max","push","toString","years","months","days","getDateNow","myDate","Date","getFullYear","getMonth","getDate","strToObj","str","split","objToStr","toDB","val","judgeDate","range","start","replace","end","now","formatDate","data","format","undefined","yearLen","indexOf","match","length","monthLen","dayLen","console","error","substr","show","fliterNum","num","setDatesDaysBg","setDays","dates","startDate","endDate","firstWeek","monthDay","addone","type","active","delone","prevMonth","prevMonthDay","setMonths","nowDate"],"mappings":"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","file":"dateCore.js","sourcesContent":["'use strict';\r\n// 日历核心算法\r\n//  给定年月获取当月天数\r\nfunction getMDay(y, m) {\r\n    var mday = new Array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);\r\n    if ((y % 4 == 0 && y % 100 != 0) || y % 400 == 0)// 判断是否是闰月 \r\n        mday[1] = 29;\r\n    return mday[m - 1];\r\n}\r\n\r\n//  获取星期数 \r\nfunction weekNumber(y, m, d) {\r\n    var wk;\r\n    if (m <= 12 && m >= 1) {\r\n        for (var i = 1; i < m; ++i) {\r\n            d += getMDay(y, i);\r\n        }\r\n    }\r\n    /* 根据日期计算星期的公式 */\r\n    wk = (y - 1 + (y - 1) / 4 - (y - 1) / 100 + (y - 1) / 400 + d) % 7;\r\n    // console.log();\r\n    // 0对应星期天，1对应星期一 0，1，2，3，4，5，6\r\n    wk = Math.round(wk, 10);\r\n    // wk = (wk === 7 ? 0 : wk);\r\n    return Math.round(wk, 10);\r\n}\r\n\r\n// 加，减一个月,返回对应的 y ，m\r\nfunction addAndDelOneMonth(y, m, mark) {\r\n    y = parseInt(y, 10);\r\n    m = parseInt(m, 10);\r\n    // 加一个月\r\n    if (mark == 'add') {\r\n        if (m != 12) {\r\n            m++;\r\n        } else {\r\n            m = 1;\r\n            y++;\r\n        }\r\n    } else if (mark == 'del') { // 减一个月\r\n        if (m != 1) {\r\n            m--;\r\n        } else {\r\n            m = 12;\r\n            y--;\r\n        }\r\n    }\r\n    return {\r\n        year: y,\r\n        month: m\r\n    };\r\n}\r\n\r\n// 加减一个月。y,m,d\r\nfunction addOrDelMonthDay(date, mark) {\r\n    var obj = addAndDelOneMonth(date.year, date.month, mark);\r\n    var maxday = getMDay(obj.year, obj.month);\r\n    if (date.day > maxday) {\r\n        obj['day'] = maxday;\r\n    } else {\r\n        obj['day'] = date.day;\r\n    }\r\n    return obj;\r\n}\r\n\r\n// 设置初始化的时，分，秒\r\nfunction setHHMMSS() {\r\n    var hours = [], minutes = [], seconds = [];\r\n    var setArr = function (arr, max) {\r\n        for (let i = 0; i < max; i++) {\r\n            if (i < 10) {\r\n                arr.push('0' + i);\r\n            } else {\r\n                arr.push(i.toString());\r\n            }\r\n        }\r\n    }\r\n    setArr(hours, 12);\r\n    setArr(minutes, 60);\r\n    setArr(seconds, 60);\r\n\r\n    setArr = null;\r\n\r\n    return {\r\n        years: [],\r\n        months: [],\r\n        days: [],\r\n        hours: hours,\r\n        minutes: minutes,\r\n        seconds: seconds\r\n    }\r\n}\r\n\r\n// 获取当前时间\r\nfunction getDateNow() {\r\n    var myDate = new Date();\r\n    return {\r\n        year: myDate.getFullYear(),\r\n        month: 1 + parseInt(myDate.getMonth()),\r\n        day: myDate.getDate()\r\n    }\r\n}\r\n\r\n// 字符串转换obj 格式 xxxx-xx-xx\r\nfunction strToObj(str) {\r\n    var arr = str.split('-');\r\n    return {\r\n        year: parseInt(arr[0], 10) || null,\r\n        month: parseInt(arr[1], 10) || null,\r\n        day: parseInt(arr[2], 10) || null\r\n    }\r\n}\r\n\r\n// obj to xxxx-xx-xx\r\nfunction objToStr(obj) {\r\n    var str = '';\r\n    var toDB = function (val) {\r\n        val = parseInt(val, 10);\r\n        if (val < 10) {\r\n            val = '0' + val;\r\n        } else {\r\n            val = '' + val;\r\n        }\r\n        return val;\r\n    };\r\n\r\n    if (obj.year) {\r\n        str += obj.year;\r\n    } else {\r\n        str += 'null';\r\n    }\r\n    if (obj.month) {\r\n        str += toDB(obj.month);\r\n    } else {\r\n        str += 'null';\r\n    }\r\n    if (obj.day) {\r\n        str += toDB(obj.day);\r\n    } else {\r\n        str += 'null';\r\n    }\r\n\r\n    toDB = null;\r\n\r\n    return str;\r\n}\r\n\r\n// 判断日历的范围\r\nfunction judgeDate(obj, range) {\r\n\r\n    // 如果没有范围\r\n    if (!range) {\r\n        return true;\r\n    }\r\n\r\n    range = range || ',';\r\n    let arr = range.split(',');\r\n    let start = parseInt(arr[0].replace(/-/g, ''), 10) || 0;\r\n    let end = parseInt(arr[1].replace(/-/g, ''), 10) || 0;\r\n\r\n    // 如果没有限制\r\n    if (start === 0 && end === 0) {\r\n        return true;\r\n    }\r\n    let now = parseInt(objToStr(obj).replace(/null/g, '00'), 10);\r\n    if (start === 0 && now <= end) {\r\n        return true;\r\n    }\r\n    if (end === 0 && now >= start) {\r\n        return true;\r\n    }\r\n    if (now <= end && now >= start) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n// 格式化日历\r\nfunction formatDate(data, format) {\r\n    if (format != undefined && data) {\r\n\r\n        var yearLen = (format.indexOf('y') == -1 ? 0 : format.match(/[y]/ig).length)\r\n        var monthLen = (format.indexOf('m') == -1 ? 0 : format.match(/[m]/ig).length)\r\n        var dayLen = (format.indexOf('d') == -1 ? 0 : format.match(/[d]/ig).length)\r\n\r\n        var val = format;\r\n        if (yearLen > 4 || monthLen > 2 || dayLen > 2) {\r\n            console.error('format 格式错误，请参考 yyyy-mm-dd');\r\n            return;\r\n        }\r\n        var str = '';\r\n        for (let i = 0; i < yearLen; i++) {\r\n            str += 'y';\r\n        }\r\n        val = val.replace(str, function () {\r\n            data.year = data.year.toString();\r\n            return data.year.substr(data.year.length - yearLen, yearLen);\r\n        });\r\n\r\n        if (monthLen == 2) {\r\n            val = val.replace('mm', data.month < 10 ? '0' + data.month : data.month);\r\n        } else {\r\n            val = val.replace('m', data.month);\r\n        }\r\n        if (dayLen == 2) {\r\n            val = val.replace('dd', data.day < 10 ? '0' + data.day : data.day);\r\n        } else {\r\n            val = val.replace('d', data.day);\r\n        }\r\n    } else if (data) {\r\n        var yearLen = 4;\r\n        var monthLen = 2;\r\n        var dayLen = 2;\r\n        var val = data.year + '/' + data.month + '/' + data.day;\r\n    } else {\r\n        val = ''\r\n    }\r\n\r\n    return {\r\n        val: val,\r\n        show: {\r\n            year: yearLen == 0 ? false : true,\r\n            month: monthLen == 0 ? false : true,\r\n            day: dayLen == 0 ? false : true\r\n        }\r\n    };\r\n}\r\n\r\n// 1~9 加 0\r\nfunction fliterNum(num) {\r\n    num = parseInt(num, 10);\r\n    if (num < 10) {\r\n        num = '0' + num\r\n    } else {\r\n        num = num.toString();\r\n    }\r\n    return num;\r\n}\r\n\r\n// 加工组合选择框，选择区间的底色\r\nfunction setDatesDaysBg(obj, start, end) {\r\n    let now = parseInt(formatDate(obj, 'yyyymmdd').val, 10);\r\n    if (now >= start && now <= end) {\r\n        obj['inner'] = true\r\n    }\r\n\r\n    if (now === start) {\r\n        obj['active'] = true;\r\n        obj['mark'] = 'start'\r\n    }\r\n    if (now === end) {\r\n        obj['active'] = true;\r\n        obj['mark'] = 'end'\r\n    }\r\n\r\n    return obj;\r\n}\r\n\r\n// 设置days 的列表\r\nfunction setDays(date, dates, mark) {\r\n\r\n    // 如果是日历组合的时候\r\n    let start, end;\r\n    if (dates) {\r\n        start = parseInt(formatDate(dates.startDate, 'yyyymmdd').val, 10);\r\n        end = parseInt(formatDate(dates.endDate, 'yyyymmdd').val, 10);\r\n    }\r\n\r\n    // 一共有6*7 = 42 个格子\r\n    let arr = [];\r\n    // 当月第一天周几\r\n    let firstWeek = weekNumber(date.year, date.month, 1);\r\n    // 当月有多少天\r\n    let monthDay = getMDay(date.year, date.month);\r\n\r\n    // 加一个月\r\n    let addone = addAndDelOneMonth(date.year, date.month, 'add');\r\n    if (firstWeek == 7) {\r\n        for (let i = 1; i <= 42; i++) {\r\n            if (i <= monthDay) {\r\n                let obj = {\r\n                    day: i,\r\n                    month: date.month,\r\n                    year: date.year,\r\n                    type: 'now',\r\n                    active: i === date.day ? true : false\r\n                }\r\n\r\n                // 日历组合,开始和结束的点都要设置 mt-dates-start or mt-dates-end\r\n                if (mark && i === date.day) {\r\n                    obj['mark'] = mark.split('_')[1];\r\n                }\r\n\r\n                if (mark) {\r\n                    // 加工组合选择框，选择区间的底色\r\n                    setDatesDaysBg(obj, start, end)\r\n                }\r\n\r\n                arr.push(obj)\r\n            } else {\r\n\r\n                let obj = {\r\n                    day: i - monthDay,\r\n                    month: addone.month,\r\n                    year: addone.year,\r\n                    type: 'next',\r\n                    active: false\r\n                }\r\n\r\n                if (mark) {\r\n                    // 加工组合选择框，选择区间的底色\r\n                    setDatesDaysBg(obj, start, end)\r\n                }\r\n\r\n                arr.push(obj)\r\n            }\r\n        }\r\n    } else {\r\n        // 减一个月\r\n        let delone = addAndDelOneMonth(date.year, date.month, 'del');\r\n        // 获取上个月的日期\r\n        let prevMonth = addAndDelOneMonth(date.year, date.month, 'del').month;\r\n        let prevMonthDay = getMDay(date.year, prevMonth)\r\n        for (let i = 1; i <= 42; i++) {\r\n            if (i <= firstWeek) {\r\n                let obj = {\r\n                    day: prevMonthDay - firstWeek + i,\r\n                    month: delone.month,\r\n                    year: delone.year,\r\n                    type: 'prev',\r\n                    active: false\r\n                }\r\n                if (mark) {\r\n                    // 加工组合选择框，选择区间的底色\r\n                    setDatesDaysBg(obj, start, end)\r\n                }\r\n                arr.push(obj)\r\n            } else if (i > firstWeek && i <= monthDay + firstWeek) {\r\n                let obj = {\r\n                    day: i - firstWeek,\r\n                    month: date.month,\r\n                    year: date.year,\r\n                    type: 'now',\r\n                    active: (i - firstWeek === date.day) ? true : false\r\n                }\r\n\r\n                // 日历组合\r\n                if (mark && (i - firstWeek === date.day)) {\r\n                    obj['mark'] = mark.split('_')[1];\r\n                }\r\n\r\n                if (mark) {\r\n                    // 加工组合选择框，选择区间的底色\r\n                    setDatesDaysBg(obj, start, end)\r\n                }\r\n\r\n                arr.push(obj)\r\n            } else {\r\n\r\n                let obj = {\r\n                    day: i - monthDay - firstWeek,\r\n                    month: addone.month,\r\n                    year: addone.year,\r\n                    type: 'next',\r\n                    active: false\r\n                }\r\n\r\n                if (mark) {\r\n                    // 加工组合选择框，选择区间的底色\r\n                    setDatesDaysBg(obj, start, end)\r\n                }\r\n\r\n                arr.push(obj)\r\n            }\r\n        }\r\n    }\r\n    return arr;\r\n}\r\n\r\n// 设置month 显示列表\r\nfunction setMonths(nowDate) {\r\n    let arr = []\r\n    for (let i = 0; i < 12; i++) {\r\n        arr.push({\r\n            active: i + 1 === nowDate.month ? true : false,\r\n            year: nowDate.year,\r\n            month: i + 1\r\n        });\r\n    }\r\n    return arr;\r\n}\r\n\r\n// \r\nexport { getMDay, weekNumber, addAndDelOneMonth, addOrDelMonthDay, formatDate, getDateNow, fliterNum, setHHMMSS, setDays, setMonths, strToObj, objToStr, judgeDate };"]}